{"version":3,"file":"KMLLayerView2D-d06577b2.js","sources":["../../node_modules/@arcgis/core/views/support/imageReprojection.js","../../node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{PixelFormat as p,PixelType as h,TextureWrapMode as c,TextureSamplingMode as x,TargetType as d,DepthStencilTargetType as g,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as _}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as f}from\"../webgl/rasterUtils.js\";import{RenderingContext as l}from\"../webgl/RenderingContext.js\";import{Texture as w}from\"../webgl/Texture.js\";class b{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(b._instance)return b._instanceRefCount++,b._instance;b._instanceRefCount=1,b._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl\");t.getExtension(\"OES_texture_float\"),this._rctx=new l(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:l,y:b}=i(m,s,t.extent);let T=(l+b)/2;const R=Math.round((o.xmax-o.xmin)/T),j=Math.round((o.ymax-o.ymin)/T);T=(o.width/R+o.height/j)/2;const E=new e({x:T,y:T,spatialReference:o.spatialReference}),D=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:E,hasWrapAround:!0,spacing:[16,16]}),C=f(this._rctx,D),y=new w(this._rctx,{width:R,height:j,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1}),M=new _(this._rctx,{colorTarget:d.TEXTURE,depthStencilTarget:g.NONE,width:R,height:j},y);this._rctx.bindFramebuffer(M),this._rctx.setViewport(0,0,R,j),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(C,1),this._quad.bind();const{width:A=0,height:S=0}=t.texture.descriptor;if(this._program.setUniform2f(\"u_srcImageSize\",A,S),this._program.setUniform2fv(\"u_transformSpacing\",D.spacing),this._program.setUniform2fv(\"u_transformGridSize\",D.size),this._program.setUniform2f(\"u_targetImageSize\",R,j),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),C.dispose(),n){const{width:t=0,height:e=0}=M.descriptor,r=new ImageData(t,e);return M.readPixels(0,0,t,e,p.RGBA,h.UNSIGNED_BYTE,r.data),M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o,imageData:r}}return M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new w(this._rctx,{width:t.bitmapData.width,height:t.bitmapData.height,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:x.LINEAR,hasMipmap:!1},r),a=this.reprojectTexture({texture:i,extent:t.extent},e,!0);a.texture.dispose();const o=document.createElement(\"canvas\"),m=a.imageData;o.width=m.width,o.height=m.height;return o.getContext(\"2d\").putImageData(m,0,0),{bitmapData:o,extent:a.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(b._instanceRefCount--,0===b._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),b._instance=null)):(this._quad.dispose(),this._program.dispose())}}b._instanceRefCount=0;export{b as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{abortMaybe as s,destroyMaybe as a,isSome as o,isNone as r}from\"../../../core/maybe.js\";import{watch as l}from\"../../../core/reactiveUtils.js\";import{queryToObject as n,objectToQuery as h}from\"../../../core/urlUtils.js\";import{property as p}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import{subclass as m}from\"../../../core/accessorSupport/decorators/subclass.js\";import c from\"../../../geometry/Extent.js\";import{load as d,project as y}from\"../../../geometry/projection.js\";import g from\"../../../geometry/SpatialReference.js\";import{getGraphics as w,fetchService as u,parseKML as _}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as b}from\"../../../rest/utils.js\";import{GraphicsCollection as V}from\"../../../support/GraphicsCollection.js\";import{Bitmap as f}from\"../engine/Bitmap.js\";import{BitmapContainer as v}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as S}from\"./LayerView2D.js\";import I from\"./graphics/GraphicContainer.js\";import x from\"./graphics/GraphicsView2D.js\";import C from\"../../layers/LayerView.js\";import{ImageReprojector as j}from\"../../support/imageReprojection.js\";class k{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let P=class extends(S(C)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new v,this._kmlVisualData=new k,this._fetchController=null,this.allVisiblePoints=new V,this.allVisiblePolylines=new V,this.allVisiblePolygons=new V,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new x({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new x({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new x({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new I(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),l((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new j}detach(){this._fetchController=s(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=a(this._polygonsView),this._polylinesView=a(this._polylinesView),this._pointsView=a(this._pointsView),this._imageReprojector=a(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,c.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new f(i.bitmapData,{immutable:!1,requestRenderOnSourceChangedEnabled:!0});t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:l}=e;if(o(s)){if(r(t))throw new Error(\"Loading this network link requires a view state.\");let p;if(await d(),o(a)&&1!==a){const e=new c(t.extent);e.expand(a),p=e}else p=t.extent;p=y(p,g.WGS84);const m=y(p,g.WebMercator),w=p.xmin,u=p.xmax,_=p.ymin,V=p.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(m.width,m.height),I={\"[bboxWest]\":w.toString(),\"[bboxEast]\":u.toString(),\"[bboxSouth]\":_.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":p.center.x.toString(),\"[lookatLat]\":p.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":p.center.x.toString(),\"[lookatTerrainLat]\":p.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":p.center.x.toString(),\"[cameraLat]\":p.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},C=n(s);x(C);let j={};o(l)&&(j=n(l),x(j));const k=b(e.href);k.query={...k.query,...C,...j};return`${k.path}?${h(C)}`}return e.href}async _fetchService(e){const i=new k;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await w(s.points):[],a=s.polylines?await w(s.polylines):[],o=s.polygons?await w(s.polygons):[],r=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...r.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return u(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>_(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([p()],P.prototype,\"_pointsView\",void 0),e([p()],P.prototype,\"_polylinesView\",void 0),e([p()],P.prototype,\"_polygonsView\",void 0),e([p()],P.prototype,\"updating\",void 0),P=e([m(\"esri.views.2d.layers.KMLLayerView2D\")],P);const M=P;export{M as default};\n"],"names":["b","t","l","e","m","o","n","r","i","T","R","j","E","D","a","C","f","y","w","p","h","c","x","M","_","d","g","A","S","u","s","k","P","v","V","_a","_b","_c","I"],"mappings":"6vEAI42B,MAAMA,CAAC,CAAC,YAAY,EAAE,CAAC,GAAG,KAAK,UAAU,GAAG,EAAE,KAAK,UAAU,GAAG,KAAK,MAAM,MAAM,CAAC,GAAGA,EAAE,UAAU,OAAOA,EAAE,oBAAoBA,EAAE,UAAUA,EAAE,kBAAkB,EAAEA,EAAE,UAAU,KAAK,KAAK,UAAU,GAAG,MAAMC,EAAE,SAAS,cAAc,QAAQ,EAAE,WAAW,OAAO,EAAEA,EAAE,aAAa,mBAAmB,EAAE,KAAK,MAAM,IAAIC,GAAED,EAAE,CAAA,CAAE,CAAC,CAAC,MAAME,EAAE,CAAC,gBAAgB,GAAG,SAAS,GAAG,QAAQ,EAAE,EAAE,EAAEC,GAAE,mBAAmB,mBAAmB,IAAI,IAAI,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,EAAED,CAAC,EAAE,KAAK,SAAS,KAAK,MAAM,aAAa,QAAQ,EAAE,QAAQ,aAAa,EAAE,QAAQ,eAAe,EAAE,UAAU,EAAE,KAAK,MAAM,WAAW,KAAK,QAAQ,EAAE,KAAK,SAAS,aAAa,YAAY,CAAC,EAAE,KAAK,SAAS,aAAa,UAAU,CAAC,EAAE,KAAK,SAAS,aAAa,UAAU,CAAC,EAAE,KAAK,SAAS,aAAa,kBAAkB,CAAC,EAAE,KAAK,MAAM,IAAIE,GAAE,KAAK,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,iBAAiB,EAAE,EAAEC,EAAE,GAAG,CAAC,MAAMD,EAAEE,EAAE,EAAE,OAAO,CAAC,EAAEH,EAAE,IAAID,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK,EAAE,OAAO,MAAM,EAAE,QAAQ,WAAW,MAAM,GAAG,EAAE,OAAO,KAAK,EAAE,OAAO,MAAM,EAAE,QAAQ,WAAW,OAAO,iBAAiB,EAAE,OAAO,gBAAgB,CAAC,EAAE,CAAC,EAAED,EAAE,EAAEF,CAAC,EAAEQ,GAAEJ,EAAE,EAAE,EAAE,MAAM,EAAE,IAAIK,GAAGP,EAAEF,GAAG,EAAE,MAAMU,EAAE,KAAK,OAAOL,EAAE,KAAKA,EAAE,MAAMI,CAAC,EAAEE,EAAE,KAAK,OAAON,EAAE,KAAKA,EAAE,MAAMI,CAAC,EAAEA,GAAGJ,EAAE,MAAMK,EAAEL,EAAE,OAAOM,GAAG,EAAE,MAAMC,EAAE,IAAIT,EAAE,CAAC,EAAEM,EAAE,EAAEA,EAAE,iBAAiBJ,EAAE,gBAAgB,CAAC,EAAEQ,EAAEC,GAAE,CAAC,gBAAgBT,EAAE,gBAAgB,EAAE,OAAO,UAAUO,EAAE,cAAc,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,EAAEG,EAAEC,GAAE,KAAK,MAAMH,CAAC,EAAEI,EAAE,IAAIC,EAAE,KAAK,MAAM,CAAC,MAAMR,EAAE,OAAOC,EAAE,YAAYQ,EAAE,KAAK,SAASC,EAAE,cAAc,SAASC,EAAE,cAAc,aAAaC,EAAE,OAAO,UAAU,EAAE,CAAC,EAAEC,EAAE,IAAIC,GAAE,KAAK,MAAM,CAAC,YAAYC,EAAE,QAAQ,mBAAmBC,EAAE,KAAK,MAAMhB,EAAE,OAAOC,CAAC,EAAEM,CAAC,EAAE,KAAK,MAAM,gBAAgBM,CAAC,EAAE,KAAK,MAAM,YAAY,EAAE,EAAEb,EAAEC,CAAC,EAAE,KAAK,MAAM,WAAW,KAAK,QAAQ,EAAE,KAAK,MAAM,YAAY,EAAE,QAAQ,CAAC,EAAE,KAAK,MAAM,YAAYI,EAAE,CAAC,EAAE,KAAK,MAAM,KAAM,EAAC,KAAK,CAAC,MAAMY,EAAE,EAAE,OAAOC,EAAE,CAAC,EAAE,EAAE,QAAQ,WAAW,GAAG,KAAK,SAAS,aAAa,iBAAiBD,EAAEC,CAAC,EAAE,KAAK,SAAS,cAAc,qBAAqBf,EAAE,OAAO,EAAE,KAAK,SAAS,cAAc,sBAAsBA,EAAE,IAAI,EAAE,KAAK,SAAS,aAAa,oBAAoBH,EAAEC,CAAC,EAAE,KAAK,MAAM,KAAM,EAAC,KAAK,MAAM,SAAS,KAAK,MAAM,WAAW,IAAI,EAAE,KAAK,MAAM,gBAAgB,IAAI,EAAEI,EAAE,QAAS,EAACT,EAAE,CAAC,KAAK,CAAC,MAAML,EAAE,EAAE,OAAOE,EAAE,CAAC,EAAEoB,EAAE,WAAWhB,EAAE,IAAI,UAAUN,EAAEE,CAAC,EAAE,OAAOoB,EAAE,WAAW,EAAE,EAAEtB,EAAEE,EAAEgB,EAAE,KAAKC,EAAE,cAAcb,EAAE,IAAI,EAAEgB,EAAE,mBAAmBM,EAAE,iBAAiB,EAAEN,EAAE,QAAS,EAAC,CAAC,QAAQN,EAAE,OAAOZ,EAAE,UAAUE,CAAC,CAAC,CAAC,OAAOgB,EAAE,mBAAmBM,EAAE,iBAAiB,EAAEN,EAAE,UAAU,CAAC,QAAQN,EAAE,OAAOZ,CAAC,CAAC,CAAC,oBAAoB,EAAEF,EAAE,CAAC,MAAM,EAAE2B,GAAE,EAAE,UAAU,EAAExB,GAAE,EAAE,UAAU,EAAE,EAAE,WAAW,EAAE,IAAIY,EAAE,KAAK,MAAM,CAAC,MAAM,EAAE,WAAW,MAAM,OAAO,EAAE,WAAW,OAAO,YAAYC,EAAE,KAAK,SAASC,EAAE,cAAc,SAASC,EAAE,cAAc,aAAaC,EAAE,OAAO,UAAU,EAAE,EAAE,CAAC,EAAE,EAAE,KAAK,iBAAiB,CAAC,QAAQ,EAAE,OAAO,EAAE,MAAM,EAAEnB,EAAE,EAAE,EAAE,EAAE,QAAQ,UAAU,MAAM,EAAE,SAAS,cAAc,QAAQ,EAAEC,EAAE,EAAE,UAAU,SAAE,MAAMA,EAAE,MAAM,EAAE,OAAOA,EAAE,OAAc,EAAE,WAAW,IAAI,EAAE,aAAaA,EAAE,EAAE,CAAC,EAAE,CAAC,WAAW,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,MAAM,2BAA2BD,EAAEI,EAAEC,EAAE,CAAC,MAAMM,GAAG,MAAMb,EAAEE,EAAE,CAAC,aAAa,OAAO,CAAC,GAAG,KAAK2B,EAAE,SAAS,cAAc,QAAQ,EAAEA,EAAE,MAAMhB,EAAE,MAAMgB,EAAE,OAAOhB,EAAE,OAAO,MAAMR,EAAEwB,EAAE,WAAW,IAAI,EAAExB,EAAE,UAAUQ,EAAE,EAAE,CAAC,EAAE,MAAMT,EAAEC,EAAE,aAAa,EAAE,EAAEwB,EAAE,MAAMA,EAAE,MAAM,EAAE,GAAGvB,EAAE,iBAAiB,OAAOC,CAAC,EAAE,MAAM,CAAC,WAAWH,EAAE,OAAOE,CAAC,EAAE,MAAMH,EAAE,KAAK,oBAAoB,CAAC,WAAWC,EAAE,OAAOE,CAAC,EAAEC,CAAC,EAAE,MAAM,CAAC,WAAWJ,EAAE,WAAW,OAAOA,EAAE,MAAM,CAAC,CAAC,SAAS,CAAC,KAAK,WAAWJ,EAAE,oBAAwBA,EAAE,oBAAN,IAA0B,KAAK,MAAM,QAAS,EAAC,KAAK,SAAS,UAAU,KAAK,MAAM,QAAO,EAAGA,EAAE,UAAU,QAAQ,KAAK,MAAM,QAAS,EAAC,KAAK,SAAS,QAAS,EAAC,CAAC,CAACA,EAAE,kBAAkB,ECA/gG,MAAM+B,CAAC,CAAC,aAAa,CAAC,KAAK,aAAa,IAAI,IAAI,KAAK,UAAU,CAAA,EAAG,KAAK,aAAa,CAAA,EAAG,KAAK,YAAY,CAAA,EAAG,KAAK,aAAa,CAAA,CAAE,CAAC,CAAC,IAAIC,EAAE,cAAcJ,GAAEb,EAAC,CAAE,CAAC,aAAa,CAAC,MAAM,GAAG,SAAS,EAAE,KAAK,aAAa,IAAI,IAAI,KAAK,mBAAmB,IAAIkB,GAAE,KAAK,eAAe,IAAIF,EAAE,KAAK,iBAAiB,KAAK,KAAK,iBAAiB,IAAIG,EAAE,KAAK,oBAAoB,IAAIA,EAAE,KAAK,mBAAmB,IAAIA,EAAE,KAAK,oBAAoB,IAAIjC,CAAC,CAAC,MAAM,QAAQ,EAAEO,EAAE,WAAC,MAAMP,EAAE,KAAK,MAAM,MAAM,EAACkC,EAAA,KAAK,cAAL,YAAAA,EAAkB,QAAQ,IAAGC,EAAA,KAAK,iBAAL,YAAAA,EAAqB,QAAQ,IAAGC,EAAA,KAAK,gBAAL,YAAAA,EAAoB,QAAQ,EAAE,EAAE,KAAM,EAAC,OAAO,OAAO,EAAE,IAAK7B,IAAIA,EAAE,MAAMP,EAAEO,EAAE,YAAYP,EAAE,CAAC,KAAK,UAAU,QAAQO,EAAE,MAAMP,EAAE,SAAS,CAAC,EAAI,CAAA,CAAC,OAAO,EAAE,CAAC,KAAK,eAAe,KAAK,cAAc,cAAc,CAAC,EAAE,KAAK,gBAAgB,KAAK,eAAe,cAAc,CAAC,EAAE,KAAK,aAAa,KAAK,YAAY,cAAc,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,iBAAiB,IAAI,gBAAgB,KAAK,UAAU,SAAS,KAAK,kBAAkB,EAAE,KAAK,cAAc,IAAIqB,EAAE,CAAC,KAAK,KAAK,KAAK,SAAS,KAAK,mBAAmB,sBAAsB,IAAI,KAAK,cAAe,EAAC,UAAU,IAAIgB,EAAE,KAAK,KAAK,oBAAoB,CAAC,CAAC,EAAE,KAAK,UAAU,SAAS,KAAK,cAAc,SAAS,EAAE,KAAK,eAAe,IAAIhB,EAAE,CAAC,KAAK,KAAK,KAAK,SAAS,KAAK,oBAAoB,sBAAsB,IAAI,KAAK,cAAe,EAAC,UAAU,IAAIgB,EAAE,KAAK,KAAK,oBAAoB,CAAC,CAAC,EAAE,KAAK,UAAU,SAAS,KAAK,eAAe,SAAS,EAAE,KAAK,YAAY,IAAIhB,EAAE,CAAC,KAAK,KAAK,KAAK,SAAS,KAAK,iBAAiB,sBAAsB,IAAI,KAAK,cAAe,EAAC,UAAU,IAAIgB,EAAE,KAAK,KAAK,oBAAoB,CAAC,CAAC,EAAE,KAAK,UAAU,SAAS,KAAK,YAAY,SAAS,EAAE,KAAK,iBAAiB,CAAC,KAAK,oBAAoB,GAAG,SAAU,GAAG,CAAC,EAAE,MAAM,QAASnC,GAAG,KAAK,aAAaA,CAAC,CAAG,EAAC,EAAE,QAAQ,QAASA,GAAG,KAAK,gBAAgBA,CAAC,CAAG,CAAA,CAAG,EAACD,EAAG,IAAI,KAAK,MAAM,iBAAmB,GAAG,CAAC,SAAS,CAACM,EAAEP,CAAC,IAAI,KAAK,eAAe,aAAaA,EAAE,WAAW,EAAE,UAAUO,KAAK,EAAE,CAAC,MAAML,EAAE,KAAK,eAAe,aAAa,IAAIK,EAAE,EAAE,EAAEL,IAAIA,EAAE,WAAW,EAAE,CAAC,KAAK,oBAAqB,CAAA,CAAG,CAAA,CAAC,EAAE,KAAK,gBAAgB,WAAW,KAAK,cAAc,KAAK,iBAAiB,MAAM,CAAC,EAAE,KAAK,kBAAkB,IAAIQ,CAAC,CAAC,QAAQ,CAAC,KAAK,iBAAiBmB,EAAE,KAAK,gBAAgB,EAAE,KAAK,mBAAmB,kBAAiB,EAAG,KAAK,UAAU,kBAAmB,EAAC,KAAK,aAAa,MAAK,EAAG,KAAK,cAAchB,EAAE,KAAK,aAAa,EAAE,KAAK,eAAeA,EAAE,KAAK,cAAc,EAAE,KAAK,YAAYA,EAAE,KAAK,WAAW,EAAE,KAAK,kBAAkBA,EAAE,KAAK,iBAAiB,CAAC,CAAC,WAAW,CAAE,CAAA,YAAY,CAAC,KAAK,cAAc,WAAU,EAAG,KAAK,eAAe,WAAY,EAAC,KAAK,YAAY,WAAU,CAAE,CAAC,SAAS,CAAA,CAAE,YAAY,CAAC,OAAO,KAAK,YAAY,UAAU,KAAK,cAAc,UAAU,KAAK,eAAe,QAAQ,CAAC,aAAa,EAAE,WAAEqB,EAAA,KAAK,KAAK,mBAAV,MAAAA,EAA4B,UAASC,EAAA,KAAK,KAAK,mBAAV,MAAAA,EAA4B,gBAAgB,KAAK,kBAAkB,2BAA2B,EAAE,KAAKf,EAAE,SAAS,EAAE,MAAM,EAAE,KAAK,KAAK,gBAAgB,EAAE,KAAMb,GAAG,CAAC,MAAMP,EAAE,IAAIe,GAAER,EAAE,WAAW,CAAC,UAAU,GAAG,oCAAoC,EAAE,CAAC,EAAEP,EAAE,EAAEO,EAAE,OAAO,KAAKP,EAAE,EAAEO,EAAE,OAAO,KAAKP,EAAE,WAAWO,EAAE,OAAO,MAAMA,EAAE,WAAW,MAAMP,EAAE,SAAS,EAAE,SAAS,KAAK,mBAAmB,SAASA,CAAC,EAAE,KAAK,aAAa,IAAI,EAAEA,CAAC,CAAC,CAAC,CAAE,CAAC,MAAM,qBAAqB,EAAEA,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE,eAAea,EAAE,UAAUZ,CAAC,EAAE,EAAE,GAAGG,EAAE,CAAC,EAAE,CAAC,GAAGE,EAAEN,CAAC,EAAE,MAAM,IAAI,MAAM,kDAAkD,EAAE,IAAIkB,EAAE,GAAG,MAAMM,EAAC,EAAGpB,EAAES,CAAC,GAAOA,IAAJ,EAAM,CAAC,MAAMX,EAAE,IAAIkB,EAAEpB,EAAE,MAAM,EAAEE,EAAE,OAAOW,CAAC,EAAEK,EAAEhB,CAAC,MAAMgB,EAAElB,EAAE,OAAOkB,EAAEF,EAAEE,EAAEO,EAAE,KAAK,EAAE,MAAMtB,EAAEa,EAAEE,EAAEO,EAAE,WAAW,EAAER,EAAEC,EAAE,KAAKU,EAAEV,EAAE,KAAKK,EAAEL,EAAE,KAAKe,EAAEf,EAAE,KAAKH,EAAEf,EAAE,KAAK,CAAC,EAAEA,EAAE,WAAWgC,EAAEhC,EAAE,KAAK,CAAC,EAAEA,EAAE,WAAW2B,EAAE,KAAK,IAAIxB,EAAE,MAAMA,EAAE,MAAM,EAAEkC,EAAE,CAAC,aAAapB,EAAE,SAAU,EAAC,aAAaW,EAAE,SAAQ,EAAG,cAAcL,EAAE,SAAU,EAAC,cAAcU,EAAE,SAAQ,EAAG,cAAcf,EAAE,OAAO,EAAE,SAAQ,EAAG,cAAcA,EAAE,OAAO,EAAE,SAAU,EAAC,gBAAgBS,EAAE,SAAQ,EAAG,eAAe,IAAI,kBAAkB3B,EAAE,SAAS,SAAU,EAAC,qBAAqBkB,EAAE,OAAO,EAAE,SAAQ,EAAG,qBAAqBA,EAAE,OAAO,EAAE,SAAU,EAAC,qBAAqB,IAAI,cAAcA,EAAE,OAAO,EAAE,SAAU,EAAC,cAAcA,EAAE,OAAO,EAAE,SAAQ,EAAG,cAAcS,EAAE,SAAU,EAAC,aAAa,KAAK,YAAY,KAAK,gBAAgBZ,EAAE,SAAQ,EAAG,eAAeiB,EAAE,SAAU,EAAC,mBAAmB,IAAI,kBAAkBzB,EAAE,eAAe,MAAM,eAAe,4BAA4B,aAAa,OAAO,EAAEc,EAAEnB,GAAG,CAAC,UAAUK,KAAKL,EAAE,UAAUF,KAAKqC,EAAEnC,EAAEK,CAAC,EAAEL,EAAEK,CAAC,EAAE,QAAQP,EAAEqC,EAAErC,CAAC,CAAC,CAAC,EAAEc,EAAET,EAAE,CAAC,EAAEgB,EAAEP,CAAC,EAAE,IAAIJ,EAAE,CAAA,EAAGN,EAAEH,CAAC,IAAIS,EAAEL,EAAEJ,CAAC,EAAEoB,EAAEX,CAAC,GAAG,MAAMoB,EAAE/B,EAAE,EAAE,IAAI,EAAE,OAAA+B,EAAE,MAAM,CAAC,GAAGA,EAAE,MAAM,GAAGhB,EAAE,GAAGJ,CAAC,EAAQ,GAAGoB,EAAE,QAAQX,GAAEL,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,cAAc,EAAE,CAAC,MAAMP,EAAE,IAAIuB,EAAE,MAAM,KAAK,gBAAgB,KAAK,MAAM,IAAIvB,EAAE,CAAC,EAAE,KAAK,eAAeA,EAAE,KAAK,oBAAqB,CAAA,CAAC,qBAAqB,CAAC,KAAK,iBAAiB,UAAW,EAAC,KAAK,oBAAoB,UAAS,EAAG,KAAK,mBAAmB,YAAY,KAAK,oBAAoB,UAAW,EAAC,KAAK,iBAAiB,QAAQ,KAAK,eAAe,UAAU,OAAQ,GAAG,KAAK,mBAAmB,EAAE,UAAU,CAAG,EAAC,IAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAG,CAAA,EAAE,KAAK,oBAAoB,QAAQ,KAAK,eAAe,aAAa,OAAQ,GAAG,KAAK,mBAAmB,EAAE,UAAU,CAAG,EAAC,IAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAG,CAAA,EAAE,KAAK,mBAAmB,QAAQ,KAAK,eAAe,YAAY,OAAQ,GAAG,KAAK,mBAAmB,EAAE,UAAU,CAAC,EAAG,IAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAE,EAAE,KAAK,oBAAoB,QAAQ,KAAK,eAAe,aAAa,OAAQ,GAAG,KAAK,mBAAmB,EAAE,UAAU,CAAC,EAAG,IAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAE,CAAC,CAAC,mBAAmB,EAAE,CAAC,MAAMA,EAAE,KAAK,eAAe,aAAa,IAAI,CAAC,EAAE,MAAM,CAAC,EAACA,GAAA,MAAAA,EAAG,cAAkBA,EAAE,iBAAP,IAAuB,KAAK,mBAAmBA,EAAE,cAAc,EAAE,CAAC,gBAAgB,EAAEA,EAAEP,EAAE,CAAC,OAAO,KAAK,gBAAgB,EAAEA,CAAC,EAAE,KAAM,MAAME,GAAG,CAAC,UAAU2B,KAAK3B,EAAE,UAAU,CAACK,EAAE,aAAa,IAAIsB,EAAE,GAAGA,CAAC,EAAE,MAAM3B,EAAE2B,EAAE,OAAO,MAAMZ,EAAEY,EAAE,MAAM,EAAE,CAAA,EAAGhB,EAAEgB,EAAE,UAAU,MAAMZ,EAAEY,EAAE,SAAS,EAAE,CAAA,EAAGzB,EAAEyB,EAAE,SAAS,MAAMZ,EAAEY,EAAE,QAAQ,EAAE,CAAA,EAAGvB,EAAEuB,EAAE,WAAW,CAAA,EAAG,GAAGtB,EAAE,UAAU,KAAK,GAAGL,EAAE,IAAKA,IAAI,CAAC,KAAKA,EAAE,WAAW2B,EAAE,EAAE,EAAI,CAAA,EAAEtB,EAAE,aAAa,KAAK,GAAGM,EAAE,IAAKX,IAAI,CAAC,KAAKA,EAAE,WAAW2B,EAAE,EAAE,EAAI,CAAA,EAAEtB,EAAE,YAAY,KAAK,GAAGH,EAAE,IAAKF,IAAI,CAAC,KAAKA,EAAE,WAAW2B,EAAE,EAAE,EAAE,CAAE,EAAEtB,EAAE,aAAa,KAAK,GAAGD,EAAE,IAAKJ,IAAI,CAAC,KAAKA,EAAE,WAAW2B,EAAE,EAAE,EAAE,CAAE,EAAEA,EAAE,YAAY,CAAC,MAAM3B,EAAE,MAAM,KAAK,qBAAqB2B,EAAE,YAAY,KAAK,KAAK,KAAK,EAAE,MAAM,KAAK,gBAAgB3B,EAAEK,EAAEP,CAAC,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC,gBAAgB,EAAEO,EAAE,CAAC,OAAOqB,GAAE,EAAE,KAAK,MAAM,iBAAiB,KAAK,MAAM,gBAAgBrB,CAAC,EAAE,KAAML,GAAGqB,GAAErB,EAAE,IAAI,CAAG,CAAA,CAAC,gBAAgB,EAAE,CAAC,MAAMK,EAAE,KAAK,aAAa,IAAI,CAAC,EAAEA,IAAI,KAAK,mBAAmB,YAAYA,CAAC,EAAE,KAAK,aAAa,OAAO,CAAC,EAAE,CAAC,EAAEL,EAAE,CAACgB,EAAC,CAAE,EAAEa,EAAE,UAAU,cAAc,MAAM,EAAE7B,EAAE,CAACgB,EAAG,CAAA,EAAEa,EAAE,UAAU,iBAAiB,MAAM,EAAE7B,EAAE,CAACgB,EAAG,CAAA,EAAEa,EAAE,UAAU,gBAAgB,MAAM,EAAE7B,EAAE,CAACgB,EAAC,CAAE,EAAEa,EAAE,UAAU,WAAW,MAAM,EAAEA,EAAE7B,EAAE,CAACC,GAAE,qCAAqC,CAAC,EAAE4B,CAAC,EAAO,MAACT,GAAES"}