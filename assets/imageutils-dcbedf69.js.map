{"version":3,"file":"imageutils-dcbedf69.js","sources":["../../node_modules/@arcgis/core/geometry/support/meshUtils/exporters/gltf/imageutils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport\"../../../../../core/has.js\";import e from\"../../../../../core/Error.js\";import{isSome as t,isNone as n}from\"../../../../../core/maybe.js\";import{isDataProtocol as r,dataComponents as a}from\"../../../../../core/urlUtils.js\";function i(e){const n=c(e);return t(n)?n.toDataURL():\"\"}async function o(t){const r=c(t);if(n(r))throw new e(\"imageToArrayBuffer\",\"Unsupported image type\");const a=await m(t),i=await new Promise((e=>r.toBlob(e,a)));if(!i)throw new e(\"imageToArrayBuffer\",\"Failed to encode image\");return{data:await i.arrayBuffer(),type:a}}async function m(e){if(!(e instanceof HTMLImageElement))return\"image/png\";const t=e.src;if(r(t)){const e=a(t);return\"image/jpeg\"===e?.mediaType?e.mediaType:\"image/png\"}return/\\.png$/i.test(t)?\"image/png\":/\\.(jpg|jpeg)$/i.test(t)?\"image/jpeg\":\"image/png\"}function c(e){if(e instanceof HTMLCanvasElement)return e;if(e instanceof HTMLVideoElement)return null;const t=document.createElement(\"canvas\");t.width=e.width,t.height=e.height;const n=t.getContext(\"2d\");return e instanceof HTMLImageElement?n.drawImage(e,0,0,e.width,e.height):e instanceof ImageData&&n.putImageData(e,0,0),t}function s(e){const t=[],n=new Uint8Array(e);for(let r=0;r<n.length;r++)t.push(String.fromCharCode(n[r]));return\"data:application/octet-stream;base64,\"+btoa(t.join(\"\"))}function g(e){if(e.byteLength<8)return!1;const t=new Uint8Array(e);return 137===t[0]&&80===t[1]&&78===t[2]&&71===t[3]&&13===t[4]&&10===t[5]&&26===t[6]&&10===t[7]}export{s as encodeBase64DataUri,o as imageToArrayBuffer,i as imageToDataURI,c as imageTypeToCanvas,g as isArrayBufferPNG};\n"],"names":["i","e","n","c","t","o","r","a","m","s","g"],"mappings":"sEAIsO,SAASA,EAAEC,EAAE,CAAC,MAAMC,EAAEC,EAAEF,CAAC,EAAE,OAAOG,EAAEF,CAAC,EAAEA,EAAE,UAAW,EAAC,EAAE,CAAC,eAAeG,EAAED,EAAE,CAAC,MAAME,EAAEH,EAAEC,CAAC,EAAE,GAAGF,EAAEI,CAAC,EAAE,MAAM,IAAIL,EAAE,qBAAqB,wBAAwB,EAAE,MAAMM,EAAE,MAAMC,EAAEJ,CAAC,EAAEJ,EAAE,MAAM,IAAI,QAASC,GAAGK,EAAE,OAAOL,EAAEM,CAAC,CAAC,EAAG,GAAG,CAACP,EAAE,MAAM,IAAIC,EAAE,qBAAqB,wBAAwB,EAAE,MAAM,CAAC,KAAK,MAAMD,EAAE,YAAa,EAAC,KAAKO,CAAC,CAAC,CAAC,eAAeC,EAAEP,EAAE,CAAC,GAAG,EAAEA,aAAa,kBAAkB,MAAM,YAAY,MAAM,EAAEA,EAAE,IAAI,GAAGK,EAAE,CAAC,EAAE,CAAC,MAAM,EAAEC,EAAE,CAAC,EAAE,OAAqB,iBAAG,aAAlB,aAA4B,EAAE,UAAU,WAAW,CAAC,MAAM,UAAU,KAAK,CAAC,EAAE,YAAY,iBAAiB,KAAK,CAAC,EAAE,aAAa,WAAW,CAAC,SAASJ,EAAEF,EAAE,CAAC,GAAGA,aAAa,kBAAkB,OAAOA,EAAE,GAAGA,aAAa,iBAAiB,OAAO,KAAK,MAAM,EAAE,SAAS,cAAc,QAAQ,EAAE,EAAE,MAAMA,EAAE,MAAM,EAAE,OAAOA,EAAE,OAAO,MAAMC,EAAE,EAAE,WAAW,IAAI,EAAE,OAAOD,aAAa,iBAAiBC,EAAE,UAAUD,EAAE,EAAE,EAAEA,EAAE,MAAMA,EAAE,MAAM,EAAEA,aAAa,WAAWC,EAAE,aAAaD,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,SAASQ,EAAER,EAAE,CAAC,MAAM,EAAE,CAAE,EAACC,EAAE,IAAI,WAAWD,CAAC,EAAE,QAAQK,EAAE,EAAEA,EAAEJ,EAAE,OAAOI,IAAI,EAAE,KAAK,OAAO,aAAaJ,EAAEI,CAAC,CAAC,CAAC,EAAE,MAAM,wCAAwC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,SAASI,EAAET,EAAE,CAAC,GAAGA,EAAE,WAAW,EAAE,MAAM,GAAG,MAAM,EAAE,IAAI,WAAWA,CAAC,EAAE,OAAa,EAAE,CAAC,IAAT,KAAiB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,IAAgB,EAAE,CAAC,IAAR,EAAS"}