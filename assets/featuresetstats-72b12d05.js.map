{"version":3,"file":"featuresetstats-72b12d05.js","sources":["../../node_modules/@arcgis/core/arcade/functions/featuresetstats.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{ArcadeExecutionError as n,ExecutionErrorCodes as t}from\"../executionError.js\";import{y as r,T as e,m as a,c as i,x as s,A as c}from\"../../chunks/languageUtils.js\";import{calculateStat as u}from\"./fieldStats.js\";import{WhereClause as o}from\"../../core/sql/WhereClause.js\";async function f(n,t,r,i,f,d){if(1===i.length){if(a(i[0]))return u(n,i[0],c(i[1],-1));if(s(i[0]))return u(n,i[0].toArray(),c(i[1],-1))}else if(2===i.length){if(a(i[0]))return u(n,i[0],c(i[1],-1));if(s(i[0]))return u(n,i[0].toArray(),c(i[1],-1));if(e(i[0])){const r=await i[0].load(),e=await l(o.create(i[1],r.getFieldsIndex()),d,f);return i[0].calculateStatistic(n,e,c(i[2],1e3),t.abortSignal)}}else if(3===i.length&&e(i[0])){const r=await i[0].load(),e=await l(o.create(i[1],r.getFieldsIndex()),d,f);return i[0].calculateStatistic(n,e,c(i[2],1e3),t.abortSignal)}return u(n,i,-1)}async function l(n,t,r){const e=n.getVariables();if(e.length>0){const a=[];for(let n=0;n<e.length;n++){const i={name:e[n]};a.push(await t.evaluateIdentifier(r,i))}const i={};for(let n=0;n<e.length;n++)i[e[n]]=a[n];return n.parameters=i,n}return n}function d(c){\"async\"===c.mode&&(c.functions.stdev=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"stdev\",t,r,e,n,c)))},c.functions.variance=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"variance\",t,r,e,n,c)))},c.functions.average=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"mean\",t,r,e,n,c)))},c.functions.mean=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"mean\",t,r,e,n,c)))},c.functions.sum=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"sum\",t,r,e,n,c)))},c.functions.min=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"min\",t,r,e,n,c)))},c.functions.max=function(n,t){return c.standardFunctionAsync(n,t,((t,r,e)=>f(\"max\",t,r,e,n,c)))},c.functions.count=function(u,o){return c.standardFunctionAsync(u,o,((c,f,l)=>{if(r(l,1,1,u,o),e(l[0]))return l[0].count(c.abortSignal);if(a(l[0])||i(l[0]))return l[0].length;if(s(l[0]))return l[0].length();throw new n(u,t.InvalidParameter,o)}))})}export{d as registerFunctions};\n"],"names":["f","n","t","r","i","d","a","u","c","s","e","l","o"],"mappings":"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"}