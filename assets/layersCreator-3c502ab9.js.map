{"version":3,"file":"layersCreator-3c502ab9.js","sources":["../../node_modules/@arcgis/core/portal/support/featureCollectionUtils.js","../../node_modules/@arcgis/core/layers/support/layersCreator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nfunction e(e){return t(e,\"notes\")}function r(e){return t(e,\"markup\")}function n(e){return t(e,\"route\")}function t(e,r){return!(!e.layerType||\"ArcGISFeatureLayer\"!==e.layerType)&&e.featureCollectionType===r}export{e as isMapNotesLayer,r as isMarkupLayer,n as isRouteLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Collection.js\";import\"../../core/has.js\";import{eachAlways as r}from\"../../core/promiseUtils.js\";import{layerLookupMap as a}from\"./lazyLayerLoader.js\";import y from\"../../portal/PortalItem.js\";import{isMapNotesLayer as t,isMarkupLayer as i,isRouteLayer as L}from\"../../portal/support/featureCollectionUtils.js\";import{selectLayerClassPath as n}from\"../../portal/support/portalLayers.js\";import{loadStyleRenderer as o}from\"../../renderers/support/styleUtils.js\";async function c(e,a,y){if(!a)return;const t=[];for(const r of a){const e=d(r,y);\"GroupLayer\"===r.layerType?t.push(M(e,r,y)):t.push(e)}const i=await r(t);for(const r of i)r.value&&e.add(r.value)}const l={ArcGISDimensionLayer:\"DimensionLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",PointCloudLayer:\"PointCloudLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",IntegratedMeshLayer:\"IntegratedMeshLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",BuildingSceneLayer:\"BuildingSceneLayer\",ArcGISTiledElevationServiceLayer:\"ElevationLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",GroupLayer:\"GroupLayer\",GeoJSON:\"GeoJSONLayer\",WebTiledLayer:\"WebTileLayer\",CSV:\"CSVLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\",KML:\"KMLLayer\",RasterDataLayer:\"UnsupportedLayer\",Voxel:\"VoxelLayer\",LineOfSightLayer:\"LineOfSightLayer\"},s={ArcGISTiledElevationServiceLayer:\"ElevationLayer\",DefaultTileLayer:\"ElevationLayer\",RasterDataElevationLayer:\"UnsupportedLayer\"},p={ArcGISTiledMapServiceLayer:\"TileLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",WebTiledLayer:\"WebTileLayer\",VectorTileLayer:\"VectorTileLayer\",ArcGISImageServiceLayer:\"UnsupportedLayer\",WMS:\"UnsupportedLayer\",ArcGISMapServiceLayer:\"UnsupportedLayer\",ArcGISSceneServiceLayer:\"SceneLayer\",DefaultTileLayer:\"TileLayer\"},S={ArcGISAnnotationLayer:\"UnsupportedLayer\",ArcGISDimensionLayer:\"UnsupportedLayer\",ArcGISFeatureLayer:\"FeatureLayer\",ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISStreamLayer:\"StreamLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",CSV:\"CSVLayer\",DefaultTileLayer:\"TileLayer\",GeoRSS:\"GeoRSSLayer\",GeoJSON:\"GeoJSONLayer\",GroupLayer:\"GroupLayer\",KML:\"KMLLayer\",MediaLayer:\"MediaLayer\",OGCFeatureLayer:\"OGCFeatureLayer\",OrientedImageryLayer:\"OrientedImageryLayer\",SubtypeGroupLayer:\"SubtypeGroupLayer\",VectorTileLayer:\"VectorTileLayer\",WFS:\"WFSLayer\",WMS:\"WMSLayer\",WebTiledLayer:\"WebTileLayer\"},u={ArcGISFeatureLayer:\"FeatureLayer\"},I={ArcGISImageServiceLayer:\"ImageryLayer\",ArcGISImageServiceVectorLayer:\"ImageryLayer\",ArcGISMapServiceLayer:\"MapImageLayer\",ArcGISTiledImageServiceLayer:\"ImageryTileLayer\",ArcGISTiledMapServiceLayer:\"TileLayer\",OpenStreetMap:\"OpenStreetMapLayer\",VectorTileLayer:\"VectorTileLayer\",WebTiledLayer:\"WebTileLayer\",BingMapsAerial:\"BingMapsLayer\",BingMapsRoad:\"BingMapsLayer\",BingMapsHybrid:\"BingMapsLayer\",WMS:\"WMSLayer\",DefaultTileLayer:\"TileLayer\"};async function d(e,r){return m(await T(e,r),e,r)}async function m(e,r,a){const y=new e;return y.read(r,a.context),\"group\"===y.type&&g(r)&&await A(y,r,a.context),await o(y,a.context),y}async function T(e,r){const o=r.context,c=f(o);let l=e.layerType||e.type;!l&&r&&r.defaultLayerType&&(l=r.defaultLayerType);const s=c[l];let p=s?a[s]:a.UnknownLayer;if(G(e)){const r=o?.portal;if(e.itemId){const t=new y({id:e.itemId,portal:r});await t.load();const i=(await n(t)).className||\"UnknownLayer\";p=a[i]}}else\"ArcGISFeatureLayer\"===l?t(e)||i(e)?p=a.MapNotesLayer:L(e)?p=a.RouteLayer:g(e)&&(p=a.GroupLayer):e.wmtsInfo&&e.wmtsInfo.url&&e.wmtsInfo.layerIdentifier?p=a.WMTSLayer:\"WFS\"===l&&\"2.0.0\"!==e.wfsInfo?.version&&(p=a.UnsupportedLayer);return p()}function g(e){if(\"ArcGISFeatureLayer\"!==e.layerType||G(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function G(e){return\"Feature Collection\"===e.type}function f(e){let r;if(\"web-scene\"===e.origin)switch(e.layerContainerType){case\"basemap\":r=p;break;case\"ground\":r=s;break;default:r=l}else switch(e.layerContainerType){case\"basemap\":r=I;break;case\"tables\":r=u;break;default:r=S}return r}async function M(r,a,y){const t=new e,i=c(t,Array.isArray(a.layers)?a.layers:[],y),L=await r;if(await i,\"group\"===L.type)return L.layers.addMany(t),L}async function A(e,r,y){const t=a.FeatureLayer,i=await t(),L=r.featureCollection,n=L?.showLegend,o=L?.layers?.map(((a,t)=>{const L=new i;L.read(a,y);const o={...y,ignoreDefaults:!0};return L.read({id:`${e.id}-sublayer-${t}`,visibility:r.visibleLayers?.includes(t)??!0},o),null!=n&&L.read({showLegend:n},o),L}));e.layers.addMany(o??[])}export{c as populateOperationalLayers};\n"],"names":["e","t","r","n","c","a","d","M","i","l","s","p","S","u","I","m","T","y","g","A","o","f","G","L","_b","_a"],"mappings":"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"}