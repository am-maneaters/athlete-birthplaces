{"version":3,"file":"HeatmapTileRenderer-10d7f2c1.js","sources":["../../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js","../../node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{drawHeatmap as t}from\"../../../../../../renderers/support/heatmapUtils.js\";class i{constructor(){this.gradient=null,this.height=512,this.intensities=null,this.width=512}render(i){t(i,512,this.intensities,this.gradient,this.minDensity,this.maxDensity)}}export{i as HeatmapSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/Error.js\";import\"../../../../../core/has.js\";import{subclass as t}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{generateGradient as i}from\"../../../../../renderers/support/heatmapUtils.js\";import{BitmapTileContainer as r}from\"../../../engine/BitmapTileContainer.js\";import s from\"./BaseTileRenderer.js\";import{HeatmapSource as n}from\"./support/HeatmapSource.js\";let o=class extends s{constructor(e){super(e),this._intensityInfo={minDensity:0,maxDensity:0},this.type=\"heatmap\",this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new r(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if(\"heatmap\"===e.type){const{minDensity:t,maxDensity:r,colorStops:s}=e;this._intensityInfo.minDensity=t,this._intensityInfo.maxDensity=r,this._gradient=i(s),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minDensity=t,i.maxDensity=r,i.gradient=this._gradient,e.bitmap.invalidateTexture())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&\"heatmap\"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minDensity:r,maxDensity:s}=this._intensityInfo,o=t.bitmap.source||new n;o.intensities=i&&i.matrix||null,o.minDensity=r,o.maxDensity=s,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(e,t){return console.error(e),Promise.reject()}};o=e([t(\"esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer\")],o);const a=o;export{a as default};\n"],"names":["i","t","s","e","r","o","n","a"],"mappings":"2nBAIkF,MAAMA,CAAC,CAAC,aAAa,CAAC,KAAK,SAAS,KAAK,KAAK,OAAO,IAAI,KAAK,YAAY,KAAK,KAAK,MAAM,GAAG,CAAC,OAAO,EAAE,CAACC,EAAE,EAAE,IAAI,KAAK,YAAY,KAAK,SAAS,KAAK,WAAW,KAAK,UAAU,CAAC,CAAC,CCA8V,IAAI,EAAE,cAAcC,CAAC,CAAC,YAAYC,EAAE,CAAC,MAAMA,CAAC,EAAE,KAAK,eAAe,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE,KAAK,KAAK,UAAU,KAAK,aAAa,CAAC,cAAc,CAAC,WAAW,IAAI,CAAA,EAAG,cAAc,IAAI,CAAE,CAAA,EAAE,cAAc,IAAI,CAAE,CAAA,EAAE,KAAK,WAAW,IAAIC,EAAED,EAAE,YAAY,CAAC,CAAC,WAAWA,EAAE,CAAC,MAAMF,EAAE,KAAK,WAAW,WAAWE,CAAC,EAAE,OAAO,KAAK,aAAa,cAAcF,EAAE,OAAOE,CAAC,EAAEF,EAAE,OAAO,WAAW,KAAK,aAAa,kBAAkBE,CAAC,EAAEF,CAAC,CAAC,gBAAgB,CAAC,MAAME,EAAE,KAAK,MAAM,SAAS,GAAeA,EAAE,OAAd,UAAmB,CAAC,KAAK,CAAC,WAAWF,EAAE,WAAWG,EAAE,WAAWF,CAAC,EAAEC,EAAE,KAAK,eAAe,WAAWF,EAAE,KAAK,eAAe,WAAWG,EAAE,KAAK,UAAUJ,EAAEE,CAAC,EAAE,KAAK,MAAM,QAASC,GAAG,CAAC,MAAMH,EAAEG,EAAE,OAAO,OAAOH,IAAIA,EAAE,WAAWC,EAAED,EAAE,WAAWI,EAAEJ,EAAE,SAAS,KAAK,UAAUG,EAAE,OAAO,kBAAiB,EAAG,CAAG,CAAA,CAAC,CAAC,SAAS,CAAC,OAAO,QAAQ,QAAQ,CAAA,CAAE,CAAC,CAAC,QAAQA,EAAE,CAACA,EAAE,SAAS,KAAK,UAAU,CAAC,CAAC,UAAUA,EAAE,CAAC,KAAK,WAAW,kBAAmB,EAACA,EAAE,YAAY,KAAK,UAAU,CAAC,CAAC,YAAYA,EAAE,CAAC,KAAK,WAAW,YAAYA,CAAC,EAAEA,EAAE,QAAO,CAAE,CAAC,iBAAiBA,EAAE,CAAC,OAAOA,GAAeA,EAAE,OAAd,SAAkB,CAAC,WAAWA,EAAE,CAAC,MAAMF,EAAE,KAAK,MAAM,IAAIE,EAAE,OAAO,EAAE,GAAG,CAACF,EAAE,OAAO,MAAMD,EAAEG,EAAE,cAAc,CAAC,WAAW,EAAE,WAAWD,CAAC,EAAE,KAAK,eAAeG,EAAEJ,EAAE,OAAO,QAAQ,IAAIK,EAAED,EAAE,YAAYL,GAAGA,EAAE,QAAQ,KAAKK,EAAE,WAAW,EAAEA,EAAE,WAAWH,EAAEG,EAAE,SAAS,KAAK,UAAUJ,EAAE,OAAO,OAAOI,EAAE,KAAK,WAAW,SAASJ,CAAC,EAAE,KAAK,WAAW,cAAa,EAAG,KAAK,cAAa,CAAE,CAAC,YAAYE,EAAE,CAAC,QAAQ,MAAMA,CAAC,CAAC,CAAC,gBAAgB,CAAA,CAAE,kBAAkB,CAAE,CAAA,cAAcA,EAAEF,EAAE,CAAC,OAAO,QAAQ,MAAME,CAAC,EAAE,QAAQ,OAAQ,CAAA,CAAC,EAAE,EAAEA,EAAE,CAACF,EAAE,iEAAiE,CAAC,EAAE,CAAC,EAAO,MAACM,EAAE"}