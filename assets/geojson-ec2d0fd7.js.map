{"version":3,"file":"geojson-ec2d0fd7.js","sources":["../../node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import{OptimizedFeature as t}from\"../../OptimizedFeature.js\";import n from\"../../OptimizedGeometry.js\";import{normalizeFieldName as o,isNumericField as r}from\"../../../support/fieldUtils.js\";const i={LineString:\"esriGeometryPolyline\",MultiLineString:\"esriGeometryPolyline\",MultiPoint:\"esriGeometryMultipoint\",Point:\"esriGeometryPoint\",Polygon:\"esriGeometryPolygon\",MultiPolygon:\"esriGeometryPolygon\"};function s(e){return i[e]}function*c(e){switch(e.type){case\"Feature\":yield e;break;case\"FeatureCollection\":for(const t of e.features)t&&(yield t)}}function*u(e){if(e)switch(e.type){case\"Point\":yield e.coordinates;break;case\"LineString\":case\"MultiPoint\":yield*e.coordinates;break;case\"MultiLineString\":case\"Polygon\":for(const t of e.coordinates)yield*t;break;case\"MultiPolygon\":for(const t of e.coordinates)for(const e of t)yield*e}}function*l(e,o={}){const{geometryType:r,objectIdField:i}=o;for(const c of e){const{geometry:e,properties:u,id:l}=c;if(e&&s(e.type)!==r)continue;const f=u||{};let a;i&&(a=f[i],null==l||a||(f[i]=a=l));const y=new t(e?g(new n,e,o):null,f,null,a??void 0);yield y}}function f(e){for(const t of e)if(t.length>2)return!0;return!1}function a(e){return!p(e)}function y(e){return p(e)}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function d(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function g(e,t,n){switch(t.type){case\"LineString\":return m(e,t,n);case\"MultiLineString\":return h(e,t,n);case\"MultiPoint\":return w(e,t,n);case\"MultiPolygon\":return P(e,t,n);case\"Point\":return b(e,t,n);case\"Polygon\":return j(e,t,n)}}function m(e,t,n){return G(e,t.coordinates,n),e}function h(e,t,n){for(const o of t.coordinates)G(e,o,n);return e}function w(e,t,n){return G(e,t.coordinates,n),e}function P(e,t,n){for(const o of t.coordinates){S(e,o[0],n);for(let t=1;t<o.length;t++)F(e,o[t],n)}return e}function b(e,t,n){return k(e,t.coordinates,n),e}function j(e,t,n){const o=t.coordinates;S(e,o[0],n);for(let r=1;r<o.length;r++)F(e,o[r],n);return e}function S(e,t,n){const o=d(t);a(o)?M(e,o,n):G(e,o,n)}function F(e,t,n){const o=d(t);y(o)?M(e,o,n):G(e,o,n)}function G(e,t,n){for(const o of t)k(e,o,n);e.lengths.push(t.length)}function M(e,t,n){for(let o=t.length-1;o>=0;o--)k(e,t[o],n);e.lengths.push(t.length)}function k(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function O(e){switch(typeof e){case\"string\":return\"esriFieldTypeString\";case\"number\":return\"esriFieldTypeDouble\";default:return\"unknown\"}}function T(t){if(!t)throw new e(\"geojson-layer:empty\",\"GeoJSON data is empty\");if(\"Feature\"!==t.type&&\"FeatureCollection\"!==t.type)throw new e(\"geojson-layer:unsupported-geojson-object\",\"missing or not supported GeoJSON object type\",{data:t});const{crs:n}=t;if(!n)return;const o=\"string\"==typeof n?n:\"name\"===n.type?n.properties.name:\"EPSG\"===n.type?n.properties.code:null,r=new RegExp(\".*(CRS84H?|4326)$\",\"i\");if(!o||!r.test(o))throw new e(\"geojson-layer:unsupported-crs\",\"unsupported GeoJSON 'crs' member\",{crs:n})}function L(e,t={}){const n=[],i=new Set,l=new Set;let a,y=!1,p=null,d=!1,{geometryType:g=null}=t,m=!1;for(const r of c(e)){const{geometry:e,properties:t,id:c}=r;if(!e||(g||(g=s(e.type)),s(e.type)===g)){if(!y){y=f(u(e))}if(d||(d=null!=c,d&&(a=typeof c,t&&(p=Object.keys(t).filter((e=>t[e]===c))))),t&&p&&d&&null!=c&&(p.length>1?p=p.filter((e=>t[e]===c)):1===p.length&&(p=t[p[0]]===c?p:[])),!m&&t){let e=!0;for(const r in t){if(i.has(r))continue;const s=t[r];if(null==s){e=!1,l.add(r);continue}const c=O(s);if(\"unknown\"===c){l.add(r);continue}l.delete(r),i.add(r);const u=o(r);u&&n.push({name:u,alias:r,type:c})}m=e}}}const h=o(1===p?.length&&p[0]||null)??void 0;if(h)for(const o of n)if(o.name===h&&r(o)){o.type=\"esriFieldTypeOID\";break}return{fields:n,geometryType:g,hasZ:y,objectIdFieldName:h,objectIdFieldType:a,unknownFields:Array.from(l)}}function I(e,t){return Array.from(l(c(e),t))}export{I as createOptimizedFeatures,s as getGeometryType,L as inferLayerProperties,T as validateGeoJSON};\n"],"names":["i","s","e","c","u","l","o","r","f","a","t","g","n","p","y","d","m","h","w","P","b","j","G","S","F","k","M","O","T","L","I"],"mappings":"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"}