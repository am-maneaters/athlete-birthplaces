{"version":3,"file":"webStyleSymbolUtils-f26e05de.js","sources":["../../node_modules/@arcgis/core/symbols/support/webStyleSymbolUtils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSymbol3D as t}from\"../../symbols.js\";import{isDevEnvironment as e,adjustStaticAGOUrl as r}from\"../../core/devEnvironmentUtils.js\";import o from\"../../core/Error.js\";import{unwrapOrThrow as l,isSome as n}from\"../../core/maybe.js\";import{urlToObject as m,removeFile as s}from\"../../core/urlUtils.js\";import a from\"../../portal/Portal.js\";import{f as i}from\"../../chunks/persistableUrlUtils.js\";import{fromJSON as p}from\"./jsonUtils.js\";import u from\"./StyleOrigin.js\";import{fetchStyle as f,symbolUrlFromStyleItem as y,requestJSON as c,makeCIMSymbolRef as b,Style2DUrlTemplate as g}from\"./styleUtils.js\";import{Thumbnail as j}from\"./Thumbnail.js\";function h(t,e,r,n){return t.name?t.styleName&&\"Esri2DPointSymbolsStyle\"===t.styleName?U(t,e,n):f(t,e,n).then((o=>d(l(o),t.name,e,r,n))):Promise.reject(new o(\"symbolstyleutils:style-symbol-reference-name-missing\",\"Missing name in style symbol reference\"))}function d(l,f,g,h,d){const U=l.data,N=g&&n(g.portal)?g.portal:a.getDefault(),w={portal:N,url:m(l.baseUrl),origin:\"portal-item\"},S=U.items.find((t=>t.name===f));if(!S){const t=`The symbol name '${f}' could not be found`;return Promise.reject(new o(\"symbolstyleutils:symbol-name-not-found\",t,{symbolName:f}))}let D=i(y(S,h),w),O=S.thumbnail?.href??null;const P=S.thumbnail&&S.thumbnail.imageData;e()&&(D=r(D)??\"\",O=r(O));const E={portal:N,url:m(s(D)),origin:\"portal-item\"};return c(D,d).then((e=>{const r=\"cimRef\"===h?b(e.data):e.data,o=p(r,E);if(o&&t(o)){if(O){const t=i(O,w);o.thumbnail=new j({url:t})}else P&&(o.thumbnail=new j({url:`data:image/png;base64,${P}`}));l.styleUrl?o.styleOrigin=new u({portal:g.portal,styleUrl:l.styleUrl,name:f}):l.styleName&&(o.styleOrigin=new u({portal:g.portal,styleName:l.styleName,name:f}))}return o}))}function U(t,e,r){const o=g.replace(/\\{SymbolName\\}/gi,t.name),l=n(e.portal)?e.portal:a.getDefault();return c(o,r).then((t=>{const e=b(t.data);return p(e,{portal:l,url:m(s(o)),origin:\"portal-item\"})}))}export{d as fetchSymbolFromStyle,h as resolveWebStyleSymbol};\n"],"names":["h","t","e","r","n","U","f","o","d","l","g","N","a","w","m","S","D","i","y","O","_a","P","E","s","c","b","p","j","u"],"mappings":"4NAI8oB,SAASA,EAAEC,EAAEC,EAAEC,EAAEC,EAAE,CAAC,OAAOH,EAAE,KAAKA,EAAE,WAAuCA,EAAE,YAA9B,0BAAwCI,EAAEJ,EAAEC,EAAEE,CAAC,EAAEE,EAAEL,EAAEC,EAAEE,CAAC,EAAE,KAAMG,GAAGC,EAAEC,EAAEF,CAAC,EAAEN,EAAE,KAAKC,EAAEC,EAAEC,CAAC,CAAG,EAAC,QAAQ,OAAO,IAAIG,EAAE,uDAAuD,wCAAwC,CAAC,CAAC,CAAC,SAASC,EAAEC,EAAEH,EAAEI,EAAEV,EAAEQ,EAAE,OAAC,MAAMH,EAAEI,EAAE,KAAKE,EAAED,GAAGN,EAAEM,EAAE,MAAM,EAAEA,EAAE,OAAOE,EAAE,WAAY,EAACC,EAAE,CAAC,OAAOF,EAAE,IAAIG,EAAEL,EAAE,OAAO,EAAE,OAAO,aAAa,EAAEM,EAAEV,EAAE,MAAM,KAAMJ,GAAGA,EAAE,OAAOK,CAAC,EAAG,GAAG,CAACS,EAAE,CAAC,MAAMd,EAAE,oBAAoBK,wBAAwB,OAAO,QAAQ,OAAO,IAAIC,EAAE,yCAAyCN,EAAE,CAAC,WAAWK,CAAC,CAAC,CAAC,CAAC,CAAC,IAAIU,EAAEC,EAAEC,EAAEH,EAAEf,CAAC,EAAEa,CAAC,EAAEM,IAAEC,EAAAL,EAAE,YAAF,YAAAK,EAAa,OAAM,KAAK,MAAMC,EAAEN,EAAE,WAAWA,EAAE,UAAU,UAAUb,EAAG,IAAGc,EAAEb,EAAEa,CAAC,GAAG,GAAGG,EAAEhB,EAAEgB,CAAC,GAAG,MAAMG,EAAE,CAAC,OAAOX,EAAE,IAAIG,EAAES,EAAEP,CAAC,CAAC,EAAE,OAAO,aAAa,EAAE,OAAOQ,EAAER,EAAER,CAAC,EAAE,KAAMN,GAAG,CAAC,MAAMC,EAAaH,IAAX,SAAayB,EAAEvB,EAAE,IAAI,EAAEA,EAAE,KAAKK,EAAEmB,EAAEvB,EAAEmB,CAAC,EAAE,GAAGf,GAAGN,EAAEM,CAAC,EAAE,CAAC,GAAGY,EAAE,CAAC,MAAMlB,EAAEgB,EAAEE,EAAEN,CAAC,EAAEN,EAAE,UAAU,IAAIoB,EAAE,CAAC,IAAI1B,CAAC,CAAC,CAAC,MAAMoB,IAAId,EAAE,UAAU,IAAIoB,EAAE,CAAC,IAAI,yBAAyBN,GAAG,CAAC,GAAGZ,EAAE,SAASF,EAAE,YAAY,IAAIqB,EAAE,CAAC,OAAOlB,EAAE,OAAO,SAASD,EAAE,SAAS,KAAKH,CAAC,CAAC,EAAEG,EAAE,YAAYF,EAAE,YAAY,IAAIqB,EAAE,CAAC,OAAOlB,EAAE,OAAO,UAAUD,EAAE,UAAU,KAAKH,CAAC,CAAC,EAAE,CAAC,OAAOC,CAAC,CAAC,CAAE,CAAC,SAASF,EAAEJ,EAAEC,EAAEC,EAAE,CAAC,MAAMI,EAAEG,EAAE,QAAQ,mBAAmBT,EAAE,IAAI,EAAEQ,EAAEL,EAAEF,EAAE,MAAM,EAAEA,EAAE,OAAOU,EAAE,WAAY,EAAC,OAAOY,EAAEjB,EAAEJ,CAAC,EAAE,KAAMF,GAAG,CAAC,MAAMC,EAAEuB,EAAExB,EAAE,IAAI,EAAE,OAAOyB,EAAExB,EAAE,CAAC,OAAOO,EAAE,IAAIK,EAAES,EAAEhB,CAAC,CAAC,EAAE,OAAO,aAAa,CAAC,CAAC,CAAG,CAAA"}