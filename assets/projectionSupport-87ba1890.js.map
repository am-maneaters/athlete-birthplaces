{"version":3,"file":"projectionSupport-87ba1890.js","sources":["../../node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{isSome as s}from\"../../../core/maybe.js\";import{initializeProjection as t,projectMany as e}from\"../../../geometry/projection.js\";import{jsonAdapter as n}from\"../../../geometry/geometryAdapters/json.js\";import{isValid as r,equals as i,isWebMercator as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{lngLatToXY as a,xyToLngLat as m,canProject as u}from\"../../../geometry/support/webMercatorUtils.js\";const l=[0,0];function h(s,t){if(!t)return null;if(\"x\"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,l),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if(\"xmin\"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,l),[e.xmax,e.ymax]=s(t.xmax,t.ymax,l),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return\"rings\"in t?{rings:c(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:\"paths\"in t?{paths:c(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:\"points\"in t?{points:p(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function c(s,t){const e=[];for(const n of s)e.push(p(n,t));return e}function p(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function f(e,n){if(!e||!n)return;const r=Array.isArray(e)?e.map((t=>s(t.geometry)?t.geometry.spatialReference:null)).filter(s):[e];await t(r.map((s=>({source:s,dest:n}))))}const x=h.bind(null,a),y=h.bind(null,m);function g(s,t,a,m){if(!s)return s;if(a||(a=t,t=s.spatialReference),!r(t)||!r(a)||i(t,a))return s;if(u(t,a)){const t=o(a)?x(s):y(s);return t.spatialReference=a,t}return e(n,[s],t,a,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,t,e){if(!s||!s.length||!t||!e||i(t,e))return s;const n={geometries:s,inSpatialReference:t,outSpatialReference:e,resolve:null};return this._jobs.push(n),new Promise((s=>{n.resolve=s,null===this._timer&&(this._timer=setTimeout(this._process,10))}))}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:r,outSpatialReference:i,resolve:a}=s;u(r,i)?o(i)?a(t.map(x)):a(t.map(y)):a(e(n,t,r,i,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const j=new _;function M(s,t,e){return j.push(s,t,e)}export{f as checkProjectionSupport,g as project,M as projectMany};\n"],"names":["l","h","s","t","e","c","p","n","f","r","x","a","y","m","g","i","u","o","_","j","M"],"mappings":"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"}