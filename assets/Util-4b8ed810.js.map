{"version":3,"file":"Util-4b8ed810.js","sources":["../../node_modules/@arcgis/core/geometry/support/lineSegment.js","../../node_modules/@arcgis/core/views/3d/webgl-engine/lib/Util.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,b as o,e,g as i,a as c,p as s,d as u}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function b(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function M(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),u=e(r.vector,r.vector),a=t(s/u,0,1),g=o(f.get(),i(f.get(),r.vector,a),c);return e(g,g)}function d(t,r){return Math.sqrt(M(t,r))}function j(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,u,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=e(v,h)/s(v);return i(g,v,t(m,u,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return u(t.origin,n);if(r>1)return u(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,e){const i=1e-6,s=r.origin,a=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=s[0]-g[0],p[1]=s[1]-g[1],p[2]=s[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<i&&Math.abs(h[1])<i&&Math.abs(h[2])<i)return!1;const m=f.get();if(m[0]=a[0]-s[0],m[1]=a[1]-s[1],m[2]=a[2]-s[2],Math.abs(m[0])<i&&Math.abs(m[1])<i&&Math.abs(m[2])<i)return!1;const b=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],M=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],d=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],j=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],l=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*j-M*M;if(Math.abs(l)<i)return!1;let A=(b*M-d*j)/l,B=(b+M*A)/j;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=s[0]+A*m[0],k[1]=s[1]+A*m[1],k[2]=s[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],e.tA=A,e.tB=B,e.pA=k,e.pB=S,e.distance2=u(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>v()));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,d as distance,M as distance2,b as fromPoints,m as fromValues,l as pointAt,j as projectPoint,A as projectPointClamp,p as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.26/esri/copyright.txt for details.\n*/\nimport{a as t}from\"../../../../chunks/vec2f64.js\";import{t as n}from\"../../../../chunks/vec4.js\";import{c as r}from\"../../../../chunks/vec4f64.js\";const o=r();class e{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function s(t,n){if(!t){n=n||\"Assertion\";const t=new Error(n).stack;throw new e(`${n} at ${t}`)}}function c(t,n){t||(n=n||\"\",console.warn(\"Verify failed: \"+n+\"\\n\"+new Error(\"verify\").stack))}function i(t,n,r,o){let e,s=(r[0]-t[0])/n[0],c=(o[0]-t[0])/n[0];s>c&&(e=s,s=c,c=e);let i=(r[1]-t[1])/n[1],f=(o[1]-t[1])/n[1];if(i>f&&(e=i,i=f,f=e),s>f||i>c)return!1;i>s&&(s=i),f<c&&(c=f);let u=(r[2]-t[2])/n[2],a=(o[2]-t[2])/n[2];return u>a&&(e=u,u=a,a=e),!(s>a||u>c)&&(a<c&&(c=a),!(c<0))}function f(n,r,o,e,s,c=t()){const i=(e[s]-o[s])*(r[0]-n[0])-(e[0]-o[0])*(r[s]-n[s]),f=(e[0]-o[0])*(n[s]-o[s])-(e[s]-o[s])*(n[0]-o[0]);if(0===i)return!1;const u=f/i;return c[0]=n[0]+u*(r[0]-n[0]),c[1]=n[s]+u*(r[s]-n[s]),!0}function u(t,r,e,c,i){o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=1,n(o,o,r),i.length>2&&(i[2]=-o[2]),n(o,o,e),s(0!==o[3]),i[0]=o[0]/o[3],i[1]=o[1]/o[3],i[2]=o[2]/o[3],i[0]=(.5*i[0]+.5)*c[2]+c[0],i[1]=(.5*i[1]+.5)*c[3]+c[1]}function a(t,n){return Math.log(t)/Math.log(n)}function h(t,n,r,o){t[12]=n,t[13]=r,t[14]=o}function l(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}export{s as assert,l as isTranslationMatrix,a as logWithBase,u as project,i as rayBoxTest,f as rayRay2D,h as setMatrixTranslation3,c as verify};\n"],"names":["v","t","a","g","b","r","e","n","o","j","A","u","p","h","f","m","s","i","c"],"mappings":"wJAI6Q,SAASA,EAAEC,EAAE,CAAC,OAAOA,EAAE,CAAC,OAAOC,EAAED,EAAE,MAAM,EAAE,OAAOC,EAAED,EAAE,MAAM,CAAC,EAAE,CAAC,OAAOE,EAAG,EAAC,OAAOA,GAAG,CAAC,CAA6K,SAASC,EAAEH,EAAEI,EAAEC,EAAEN,EAAG,EAAC,CAAC,OAAOO,EAAED,EAAE,OAAOL,CAAC,EAAEO,EAAEF,EAAE,OAAOD,EAAEJ,CAAC,EAAEK,CAAC,CAA+L,SAASG,EAAER,EAAEI,EAAEE,EAAE,CAAC,OAAOG,EAAET,EAAEI,EAAE,EAAE,EAAEE,CAAC,CAAC,CAAwD,SAASG,EAAE,EAAEH,EAAEI,EAAET,EAAEC,EAAE,CAAC,KAAK,CAAC,OAAOH,EAAE,OAAOY,CAAC,EAAE,EAAEC,EAAEL,EAAEM,EAAE,IAAK,EAACP,EAAEK,CAAC,EAAEG,EAAET,EAAEN,EAAEa,CAAC,EAAEG,EAAEhB,CAAC,EAAE,OAAOiB,EAAEd,EAAEH,EAAEC,EAAEc,EAAEJ,EAAET,CAAC,CAAC,EAAEgB,EAAEf,EAAEA,EAAE,EAAE,MAAM,CAAC,CAA6qC,IAAIE,EAAG,IAAIL,EAAG,CAAA,ECA1/D,MAAMM,CAAC,CAAC,YAAY,EAAE,CAAC,KAAK,QAAQ,CAAC,CAAC,UAAU,CAAC,MAAM,oBAAoB,KAAK,SAAS,CAAC,CAAC,SAASU,EAAEf,EAAEM,EAAE,CAAC,GAAG,CAACN,EAAE,CAACM,EAAEA,GAAG,YAAY,MAAMN,EAAE,IAAI,MAAMM,CAAC,EAAE,MAAM,MAAM,IAAID,EAAE,GAAGC,QAAQN,GAAG,CAAC,CAAC,CAA+F,SAASgB,EAAEhB,EAAEM,EAAEF,EAAEG,EAAE,CAAC,IAAI,EAAEQ,GAAGX,EAAE,CAAC,EAAEJ,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAEW,GAAGV,EAAE,CAAC,EAAEP,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAES,EAAEE,IAAI,EAAEF,EAAEA,EAAEE,EAAEA,EAAE,GAAG,IAAID,GAAGZ,EAAE,CAAC,EAAEJ,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAEO,GAAGN,EAAE,CAAC,EAAEP,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAE,GAAGU,EAAEH,IAAI,EAAEG,EAAEA,EAAEH,EAAEA,EAAE,GAAGE,EAAEF,GAAGG,EAAEC,EAAE,MAAM,GAAGD,EAAED,IAAIA,EAAEC,GAAGH,EAAEI,IAAIA,EAAEJ,GAAG,IAAIH,GAAGN,EAAE,CAAC,EAAEJ,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAE,GAAGC,EAAE,CAAC,EAAEP,EAAE,CAAC,GAAGM,EAAE,CAAC,EAAE,OAAOI,EAAE,IAAI,EAAEA,EAAEA,EAAE,EAAE,EAAE,GAAG,EAAEK,EAAE,GAAGL,EAAEO,KAAK,EAAEA,IAAIA,EAAE,GAAG,EAAEA,EAAE,GAAG"}